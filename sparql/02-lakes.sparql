SELECT ?item ?itemLabel ?count
WHERE
{
  {
    SELECT ?item (COUNT(DISTINCT ?country) AS ?count) WHERE {
      ?item wdt:P31/wdt:P279* wd:Q23397 ;
            wdt:P17 ?country .
      FILTER NOT EXISTS { ?item wdt:P31 wd:Q47486890 }
    }
    GROUP BY ?item ?itemLabel
    HAVING (?count >= 3)
  }
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE], en". }
}
ORDER BY DESC(?count) ?itemLabel